import{K as L,r as x,j as e,L as S,n as f,B as R,M as K,N as w,O as V,Q as E}from"./index-Bh8KOEIo.js";import{C as p}from"./Card-6sGXKFWa.js";import{u as U,T as H,a as I,b as y,c as P,f as C,d as $,e as b,g as B,h as F,i as G,A as W,j as O,k as Y}from"./table-CqwfFJaU.js";import{S as o,C as q,a as Q,b as z,c as J,R as X}from"./generateCategoricalChart-20ARX49K.js";import{T as j,L as Z,Y as ee,a as ae}from"./LineChart-bvTsHWdQ.js";import se from"./ErrorPage-h6u3eaJU.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],re=L("calendar",te);function le({columns:a,data:t,isLoading:r}){const[l,i]=x.useState([]),m=U({data:t,columns:a,getCoreRowModel:G(),getPaginationRowModel:F(),onSortingChange:i,getSortedRowModel:B(),state:{sorting:l}});return e.jsx("div",{className:"rounded-md border-1 border-gray-200 shadow-sm",children:e.jsxs(H,{children:[e.jsx(I,{children:m.getHeaderGroups().map(n=>e.jsx(y,{children:n.headers.map(c=>e.jsx(P,{children:c.isPlaceholder?null:C(c.column.columnDef.header,c.getContext())},c.id))},n.id))}),e.jsx($,{children:r?Array.from({length:10}).map((n,c)=>e.jsx(y,{children:a.map((_,N)=>e.jsx(b,{children:e.jsx(o,{className:"h-4 w-[70%]"})},N))},c)):m.getRowModel().rows.map(n=>e.jsx(y,{"data-state":n.getIsSelected()&&"selected",className:"hover:bg-gray-100 dark:hover:bg-blue-800",children:n.getVisibleCells().map(c=>e.jsx(b,{children:C(c.column.columnDef.cell,c.getContext())},c.id))},n.id))})]})})}const ne=({title:a,imageUrl:t,author:r,publishedAt:l,url:i})=>{const m=new Date(l).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),n="./no-image.png";return e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(q,{className:`flex flex-col overflow-hidden h-full transition duration-200
          hover:shadow-lg hover:scale-105
          dark:hover:scale-105 dark:hover:shadow-[0_4px_24px_0_rgba(80,180,255,0.25)]`,children:[e.jsx("img",{src:t||n,alt:a,onError:c=>c.currentTarget.src=n,className:"w-full h-40 object-cover"}),e.jsx(Q,{className:"pb-2 px-4 pt-3",children:e.jsx(z,{className:"text-base font-semibold line-clamp-2",children:a})}),e.jsxs(J,{className:"px-4 pb-4 text-xs text-muted-foreground space-y-2",children:[r&&e.jsxs("p",{children:["By ",r]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-3 h-3"}),m]})]})]})})};function k(){return e.jsxs("div",{className:"p-4 shadow rounded-md space-y-2",children:[e.jsx(o,{className:"h-4 w-1/2"}),e.jsx(o,{className:"h-6 w-2/3"}),e.jsx(o,{className:"h-8 w-full"})]})}const v=({id:a,name:t,image:r,current_price:l,price_change_percentage_24h:i})=>e.jsxs(S,{to:`/cryptocurrencies/${a}`,className:"flex justify-between hover:bg-gray-100 rounded-md p-1 dark:hover:bg-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:r,alt:t,className:"w-5 h-5 "}),e.jsx("p",{className:"text-base font-normal",children:t})]}),e.jsxs("p",{className:"flex gap-2 text-sm items-center ",children:[f(l.toString()),e.jsx(j,{data:i})]})]}),h=a=>t=>{const r=t.column.getIsSorted();return e.jsxs(R,{variant:"ghost",onClick:()=>t.column.toggleSorting(t.column.getIsSorted()==="asc"),className:" font-semibold has-[>svg]:px-0 cursor-pointer",children:[a,r===!1&&e.jsx(W,{}),r==="asc"&&e.jsx(O,{}),r==="desc"&&e.jsx(Y,{})]})},u=a=>({row:t})=>e.jsx("div",{className:"text-left font-medium",children:f(t.getValue(a))}),ce=[{accessorKey:"market_cap_rank",header:h("#"),cell:({row:a})=>e.jsx("div",{className:"text-center font-medium",children:a.getValue("market_cap_rank")})},{accessorKey:"name",header:h("Coin"),cell:({row:a})=>{const t=a.original.image,r=a.original.id;return e.jsxs(S,{to:`/cryptocurrencies/${r}`,className:"font-medium flex items-center gap-2",children:[e.jsx("img",{src:t||"public/tokenFallback.svg",alt:"Token img",className:"w-7 h-7"}),a.getValue("name"),e.jsx("span",{className:"text-gray-400 text-xs",children:a.original.symbol.toUpperCase()})]})}},{accessorKey:"current_price",header:h("Price"),cell:u("current_price")},{accessorKey:"price_change_percentage_24h",header:h("24h Change"),cell:({row:a})=>{const t=a.getValue("price_change_percentage_24h");return e.jsx(j,{data:t})}},{accessorKey:"total_volume",header:h("Volume"),cell:u("total_volume")},{accessorKey:"market_cap",header:h("Market Cap"),cell:u("market_cap")},{accessorKey:"fully_diluted_valuation",header:h("FDV"),cell:u("fully_diluted_valuation")},{accessorKey:"ath",header:h("ATH"),cell:u("ath")},{accessorKey:"sparkline_in_7d",header:()=>e.jsx("p",{children:"Last 7d Chart"}),cell:({row:a})=>{const t=a.getValue("sparkline_in_7d"),r=a.getValue("price_change_percentage_24h")>=0?"#22c55e":"#ef4444";return!t||!Array.isArray(t.price)?e.jsx("div",{children:"No data"}):e.jsx(X,{width:"100%",height:60,children:e.jsxs(Z,{data:t.price.map((l,i)=>({index:i,value:l})),children:[e.jsx(ee,{hide:!0,domain:[l=>l-l*.005,l=>l+l*.005]}),e.jsx(ae,{type:"monotone",dataKey:"value",stroke:r,strokeWidth:2,dot:!1})]})})}}],oe="https://newsdata.io/api/1/news";async function ie(){const a=`${oe}?apikey=pub_3270d36371324780b61f4104bc597a24&q=crypto&language=en`,t=await fetch(a);if(t.ok){const r=await t.json(),l=new Set;return r.results.filter(m=>l.has(m.title)?!1:(l.add(m.title),!0))}else throw new Error(`NewsData API error: ${t.status} ${t.statusText}`)}function T(){return e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{className:"h-6 w-6 rounded-full"}),e.jsx(o,{className:"h-4 w-28"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-16"}),e.jsx(o,{className:"h-4 w-10"})]})]})}function de(){return e.jsxs("div",{className:"rounded-md shadow p-4 space-y-3",children:[e.jsx(o,{className:"w-full aspect-[16/9] rounded-md"}),e.jsx(o,{className:"h-5 w-3/4"}),e.jsx(o,{className:"h-4 w-1/2"})]})}const fe=()=>{const[a,t]=x.useState(null),[r,l]=x.useState([]),[i,m]=x.useState([]),{tokens:n,isLoading:c,error:_}=K();x.useEffect(()=>{(async()=>{try{const[d,M,D]=await Promise.all([w("globalData",V),w("trendingToken",E),w("news",ie)]);t(d),l(M),m(D)}catch(d){console.error("Error fetching data:",d)}})()},[]);const N=x.useMemo(()=>[...n||[]].sort((s,d)=>d.price_change_percentage_24h-s.price_change_percentage_24h).slice(0,5),[n]),A=x.useMemo(()=>n?n.slice(0,10):[],[n]),g=c||!n||!a||!r;return _?e.jsx(se,{error:_}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold md:text-4xl text-center mt-6",children:"Cryptocurrency Market Overview"}),g?e.jsx(o,{className:"w-[50%] h-3"}):e.jsxs("p",{className:"text-medium lg:text-lg max-w-full flex flex-wrap gap-2",children:["The global cryptocurrency market cap today is"," ",f(a.data.total_market_cap.usd.toString(),!0),", a"," ",e.jsx(j,{data:a.data.market_cap_change_percentage_24h_usd})," ","change in the last 24 hours."]})]}),e.jsxs("section",{className:"flex gap-2 flex-col md:flex-row w-full",children:[e.jsx("div",{className:"flex gap-2 flex-1/4 md:flex-col",children:g?e.jsxs(e.Fragment,{children:[e.jsx(p,{children:e.jsx(k,{})}),e.jsx(p,{children:e.jsx(k,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{title:f(a.data.total_market_cap.usd.toString()),cardClassName:"gap-2 p-4 md:h-[50%] w-full",titleClassName:"lg:text-lg md:text-medium text-sm font-semibold ",headerClassName:"px-0",contentClassName:"p-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-gray-500 font-medium text-sm dark:text-gray-400",children:"Market Cap"}),e.jsx(j,{data:a.data.market_cap_change_percentage_24h_usd})]})}),e.jsx(p,{title:f(a.data.total_volume.usd.toString()),cardClassName:"gap-2 p-4 md:h-[50%] w-full",headerClassName:"px-0",titleClassName:"lg:text-lg text-medium font-semibold ",contentClassName:"p-0",children:e.jsx("p",{className:"text-gray-500 font-medium text-sm dark:text-gray-400",children:"24h Trading Volume"})})]})}),e.jsx(p,{title:"ðŸ”¥ Trending",cardClassName:"p-4 justify-between gap-0 flex-2/5",headerClassName:"px-0",contentClassName:"flex flex-col gap-0 px-0",titleClassName:"text-lg font-semibold",children:g?Array.from({length:5}).map((s,d)=>e.jsx(T,{},d)):r.map(s=>e.jsx(v,{id:s.item.id,name:s.item.name,image:s.item.small,current_price:s.item.data.price,price_change_percentage_24h:s.item.data.price_change_percentage_24h.usd},s.item.id))}),e.jsx(p,{title:"ðŸš€ Top Gainers",cardClassName:"flex-2/5 gap-0 p-4 justify-between",headerClassName:"px-0",contentClassName:"flex flex-col gap-0 px-0",titleClassName:"text-lg font-semibold",children:g?Array.from({length:5}).map((s,d)=>e.jsx(T,{},d)):N.map(s=>e.jsx(v,{id:s.id,name:s.name,image:s.image,current_price:s.current_price,price_change_percentage_24h:s.price_change_percentage_24h},s.id))})]}),e.jsxs("section",{className:"w-full",children:[e.jsxs("h1",{className:"text-2xl font-medium mb-10 text-center",children:["Top 10 Cryptocurrencies"," "]}),e.jsx(le,{data:A,columns:ce,isLoading:g})]}),e.jsxs("section",{className:"w-full",children:[e.jsx("h1",{className:"text-2xl font-medium mb-10 text-center",children:"Last Crypto News"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 ",children:g?Array.from({length:6}).map((s,d)=>e.jsx(de,{},d)):i.length>0?i.map(s=>e.jsx(ne,{title:s.title,author:s.creator&&s.creator.length>0?s.creator[0]:"Unknown",imageUrl:s.image_url,publishedAt:s.pubDate,url:s.link},s.article_id)):e.jsx("p",{children:"There are no news at the moment"})})]})]})};export{fe as Home};
