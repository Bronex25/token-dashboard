import{y as k,r as f,j as e,L as b,B as v,F as h}from"./index-C8APkxmi.js";import{C as g}from"./Card-CpwZZGYk.js";import{u as T,T as S,a as A,b as u,c as L,f as j,d as M,e as _,g as K,h as R,i as D,A as F,j as V,k as q}from"./table-_yZQ-Q-q.js";import{S as c,m as x,R as H,C as U,a as E,b as I,c as $}from"./generateCategoricalChart-DZjS8QFb.js";import{T as p,L as B,Y as P,b as G,d as W,e as Y,f as O}from"./fetchCoinGecko-B2qp3sCs.js";import Q from"./ErrorPage-I47OJgEf.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],J=k("calendar",z);function X({columns:a,data:t,isLoading:s}){const[l,o]=f.useState([]),i=T({data:t,columns:a,getCoreRowModel:D(),getPaginationRowModel:R(),onSortingChange:o,getSortedRowModel:K(),state:{sorting:l}});return e.jsxs("section",{className:"w-full",children:[e.jsxs("h1",{className:"text-2xl font-medium mb-10 text-center",children:["Top 10 Cryptocurrencies"," "]}),e.jsx("div",{className:"rounded-md border-1 border-gray-200 shadow-sm",children:e.jsxs(S,{children:[e.jsx(A,{children:i.getHeaderGroups().map(r=>e.jsx(u,{children:r.headers.map(n=>e.jsx(L,{children:n.isPlaceholder?null:j(n.column.columnDef.header,n.getContext())},n.id))},r.id))}),e.jsx(M,{children:s?Array.from({length:10}).map((r,n)=>e.jsx(u,{children:a.map((ne,C)=>e.jsx(_,{children:e.jsx(c,{className:"h-4 w-[70%]"})},C))},n)):i.getRowModel().rows.map(r=>e.jsx(u,{"data-state":r.getIsSelected()&&"selected",className:"hover:bg-gray-100 dark:hover:bg-blue-800",children:r.getVisibleCells().map(n=>e.jsx(_,{children:j(n.column.columnDef.cell,n.getContext())},n.id))},r.id))})]})})]})}function y(){return e.jsxs("div",{className:"p-4 shadow rounded-md space-y-2",children:[e.jsx(c,{className:"h-4 w-1/2"}),e.jsx(c,{className:"h-6 w-2/3"}),e.jsx(c,{className:"h-8 w-full"})]})}const N=({id:a,name:t,image:s,current_price:l,price_change_percentage_24h:o})=>e.jsxs(b,{to:`/cryptocurrencies/${a}`,className:"flex justify-between hover:bg-gray-100 rounded-md p-1 dark:hover:bg-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:s,alt:t,className:"w-5 h-5 "}),e.jsx("p",{className:"text-base font-normal",children:t})]}),e.jsxs("p",{className:"flex gap-2 text-sm items-center ",children:[x(l.toString()),e.jsx(p,{data:o})]})]}),d=a=>t=>{const s=t.column.getIsSorted();return e.jsxs(v,{variant:"ghost",onClick:()=>t.column.toggleSorting(t.column.getIsSorted()==="asc"),className:" font-semibold has-[>svg]:px-0 cursor-pointer",children:[a,s===!1&&e.jsx(F,{}),s==="asc"&&e.jsx(V,{}),s==="desc"&&e.jsx(q,{})]})},m=a=>({row:t})=>e.jsx("div",{className:"text-left font-medium",children:x(t.getValue(a))}),Z=[{accessorKey:"market_cap_rank",header:d("#"),cell:({row:a})=>e.jsx("div",{className:"text-center font-medium",children:a.getValue("market_cap_rank")})},{accessorKey:"name",header:d("Coin"),cell:({row:a})=>{const t=a.original.image,s=a.original.id;return e.jsxs(b,{to:`/cryptocurrencies/${s}`,className:"font-medium flex items-center gap-2",children:[e.jsx("img",{src:t||"public/tokenFallback.svg",alt:"Token img",className:"w-7 h-7"}),a.getValue("name"),e.jsx("span",{className:"text-gray-400 text-xs",children:a.original.symbol.toUpperCase()})]})}},{accessorKey:"current_price",header:d("Price"),cell:m("current_price")},{accessorKey:"price_change_percentage_24h",header:d("24h Change"),cell:({row:a})=>{const t=a.getValue("price_change_percentage_24h");return e.jsx(p,{data:t})}},{accessorKey:"total_volume",header:d("Volume"),cell:m("total_volume")},{accessorKey:"market_cap",header:d("Market Cap"),cell:m("market_cap")},{accessorKey:"fully_diluted_valuation",header:d("FDV"),cell:m("fully_diluted_valuation")},{accessorKey:"ath",header:d("ATH"),cell:m("ath")},{accessorKey:"sparkline_in_7d",header:()=>e.jsx("p",{children:"Last 7d Chart"}),cell:({row:a})=>{const t=a.getValue("sparkline_in_7d"),s=a.getValue("price_change_percentage_24h")>=0?"#22c55e":"#ef4444";return!t||!Array.isArray(t.price)?e.jsx("div",{children:"No data"}):e.jsx(H,{width:"100%",height:60,children:e.jsxs(B,{data:t.price.map((l,o)=>({index:o,value:l})),children:[e.jsx(P,{hide:!0,domain:[l=>l-l*.005,l=>l+l*.005]}),e.jsx(G,{type:"monotone",dataKey:"value",stroke:s,strokeWidth:2,dot:!1})]})})}}];function w(){return e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(c,{className:"h-6 w-6 rounded-full"}),e.jsx(c,{className:"h-4 w-28"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(c,{className:"h-4 w-16"}),e.jsx(c,{className:"h-4 w-10"})]})]})}const ee="https://newsdata.io/api/1/news";async function ae(){const a=`${ee}?apikey=pub_3270d36371324780b61f4104bc597a24&q=crypto&language=en`,t=await fetch(a);if(t.ok){const s=await t.json(),l=new Set;return s.results.filter(i=>l.has(i.title)?!1:(l.add(i.title),!0))}else throw new Error(`NewsData API error: ${t.status} ${t.statusText}`)}const se=()=>({global:h({queryKey:["globalData"],queryFn:O,staleTime:5*60*1e3}),trending:h({queryKey:["trendingTokens"],queryFn:Y,staleTime:5*60*1e3}),news:h({queryKey:["news"],queryFn:ae,staleTime:5*60*1e3}),tokens:h({queryKey:["tokens"],queryFn:()=>W("1"),staleTime:5*60*1e3})});function te(){return e.jsxs("div",{className:"rounded-md shadow p-4 space-y-3",children:[e.jsx(c,{className:"w-full aspect-[16/9] rounded-md"}),e.jsx(c,{className:"h-5 w-3/4"}),e.jsx(c,{className:"h-4 w-1/2"})]})}const re=({title:a,imageUrl:t,author:s,publishedAt:l,url:o})=>{const i=new Date(l).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),r="./no-image.png";return e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(U,{className:`flex flex-col overflow-hidden h-full transition duration-200
          hover:shadow-lg hover:scale-105
          dark:hover:scale-105 dark:hover:shadow-[0_4px_24px_0_rgba(80,180,255,0.25)]`,children:[e.jsx("img",{src:t||r,alt:a,onError:n=>n.currentTarget.src=r,className:"w-full h-40 object-cover"}),e.jsx(E,{className:"pb-2 px-4 pt-3",children:e.jsx(I,{className:"text-base font-semibold line-clamp-2",children:a})}),e.jsxs($,{className:"px-4 pb-4 text-xs text-muted-foreground space-y-2",children:[s&&e.jsxs("p",{children:["By ",s]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3"}),i]})]})]})})},le=({news:a,isLoading:t})=>e.jsxs("section",{className:"w-full",children:[e.jsx("h1",{className:"text-2xl font-medium mb-10 text-center",children:"Last Crypto News"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 ",children:t||!a?Array.from({length:6}).map((s,l)=>e.jsx(te,{},l)):a.length>0?a.map(s=>e.jsx(re,{title:s.title,author:s.creator&&s.creator.length>0?s.creator[0]:"Unknown",imageUrl:s.image_url,publishedAt:s.pubDate,url:s.link},s.article_id)):e.jsx("p",{children:"There are no news at the moment"})})]}),he=()=>{const{tokens:a,news:t,global:s,trending:l}=se(),o=f.useMemo(()=>[...a.data||[]].sort((r,n)=>n.price_change_percentage_24h-r.price_change_percentage_24h).slice(0,5),[a.data]),i=f.useMemo(()=>a.data?a.data.slice(0,10):[],[a]);return a.error||s.error||l.error||t.error?e.jsx(Q,{error:a.error||s.error||l.error||t.error}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold md:text-4xl text-center",children:"Cryptocurrency Market Overview"}),s.isLoading||!s.data?e.jsx(c,{className:"w-[50%] h-3"}):e.jsxs("p",{className:"text-medium lg:text-lg max-w-full flex flex-wrap gap-2",children:["The global cryptocurrency market cap today is"," ",x(s?.data.data.total_market_cap.usd.toString()||"0",!0),", a"," ",e.jsx(p,{data:s.data.data.market_cap_change_percentage_24h_usd||0})," ","change in the last 24 hours."]})]}),e.jsxs("section",{className:"flex gap-2 flex-col md:flex-row w-full",children:[e.jsx("div",{className:"flex gap-2 flex-1/4 md:flex-col",children:s.isLoading||!s.data?e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx(y,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{title:x(s.data?.data.total_market_cap.usd.toString()),cardClassName:"gap-2 p-4 md:h-[50%] w-full",titleClassName:"lg:text-lg md:text-medium text-sm font-semibold ",headerClassName:"px-0",contentClassName:"p-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-gray-500 font-medium text-sm dark:text-gray-400",children:"Market Cap"}),e.jsx(p,{data:s.data.data.market_cap_change_percentage_24h_usd})]})}),e.jsx(g,{title:x(s.data.data.total_volume.usd.toString()),cardClassName:"gap-2 p-4 md:h-[50%] w-full",headerClassName:"px-0",titleClassName:"lg:text-lg text-medium font-semibold ",contentClassName:"p-0",children:e.jsx("p",{className:"text-gray-500 font-medium text-sm dark:text-gray-400",children:"24h Trading Volume"})})]})}),e.jsx(g,{title:"ðŸ”¥ Trending",cardClassName:"p-4 justify-between gap-0 flex-2/5",headerClassName:"px-0",contentClassName:"flex flex-col gap-0 px-0",titleClassName:"text-lg font-semibold",children:l.isLoading||!l.data?Array.from({length:5}).map((r,n)=>e.jsx(w,{},n)):l.data.map(r=>e.jsx(N,{id:r.item.id,name:r.item.name,image:r.item.small,current_price:r.item.data.price,price_change_percentage_24h:r.item.data.price_change_percentage_24h.usd},r.item.id))}),e.jsx(g,{title:"ðŸš€ Top Gainers",cardClassName:"flex-2/5 gap-0 p-4 justify-between",headerClassName:"px-0",contentClassName:"flex flex-col gap-0 px-0",titleClassName:"text-lg font-semibold",children:a.isLoading?Array.from({length:5}).map((r,n)=>e.jsx(w,{},n)):o.map(r=>e.jsx(N,{id:r.id,name:r.name,image:r.image,current_price:r.current_price,price_change_percentage_24h:r.price_change_percentage_24h},r.id))})]}),e.jsx(X,{data:i,columns:Z,isLoading:a.isLoading}),e.jsx(le,{news:t.data,isLoading:t.isLoading})]})};export{he as Home};
