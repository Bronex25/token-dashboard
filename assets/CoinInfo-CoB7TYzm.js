import{E as m,F as V,j as n,G as Q,B as J,z as B,I as Z,r as ee}from"./index-C8APkxmi.js";import{g as q,C as K,a as te,T as re,L as ae,X as ie,Y as ne,b as le,c as oe}from"./fetchCoinGecko-B2qp3sCs.js";import{u as se,d as ce,e as de,i as y,f as he,g as ue,h as L,w as M,j as U,k as X,l as fe,m as k,R as me,T as ge,S as A}from"./generateCategoricalChart-DZjS8QFb.js";import{C as D}from"./Card-CpwZZGYk.js";import xe from"./ErrorPage-I47OJgEf.js";var ve=["x1","y1","x2","y2","key"],ye=["offset"];function j(e){"@babel/helpers - typeof";return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(e)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(a){be(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function be(e,t,r){return t=pe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e){var t=je(e,"string");return j(t)=="symbol"?t:t+""}function je(e,t){if(j(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(j(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},p.apply(this,arguments)}function H(e,t){if(e==null)return{};var r=we(e,t),a,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)a=l[o],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function we(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var _e=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,o=t.x,l=t.y,s=t.width,h=t.height,u=t.ry;return m.createElement("rect",{x:o,y:l,ry:u,width:s,height:h,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function Y(e,t){var r;if(m.isValidElement(e))r=m.cloneElement(e,t);else if(L(e))r=e(t);else{var a=t.x1,o=t.y1,l=t.x2,s=t.y2,h=t.key,u=H(t,ve),d=fe(u,!1);d.offset;var i=H(d,ye);r=m.createElement("line",p({},i,{x1:a,y1:o,x2:l,y2:s,fill:"none",key:h}))}return r}function ke(e){var t=e.x,r=e.width,a=e.horizontal,o=a===void 0?!0:a,l=e.horizontalPoints;if(!o||!l||!l.length)return null;var s=l.map(function(h,u){var d=g(g({},e),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(u),index:u});return Y(o,d)});return m.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Pe(e){var t=e.y,r=e.height,a=e.vertical,o=a===void 0?!0:a,l=e.verticalPoints;if(!o||!l||!l.length)return null;var s=l.map(function(h,u){var d=g(g({},e),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(u),index:u});return Y(o,d)});return m.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Ce(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,o=e.y,l=e.width,s=e.height,h=e.horizontalPoints,u=e.horizontal,d=u===void 0?!0:u;if(!d||!t||!t.length)return null;var i=h.map(function(c){return Math.round(c+o-o)}).sort(function(c,f){return c-f});o!==i[0]&&i.unshift(0);var x=i.map(function(c,f){var w=!i[f+1],v=w?o+s-c:i[f+1]-c;if(v<=0)return null;var b=f%t.length;return m.createElement("rect",{key:"react-".concat(f),y:c,x:a,height:v,width:l,stroke:"none",fill:t[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},x)}function Oe(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,o=e.fillOpacity,l=e.x,s=e.y,h=e.width,u=e.height,d=e.verticalPoints;if(!r||!a||!a.length)return null;var i=d.map(function(c){return Math.round(c+l-l)}).sort(function(c,f){return c-f});l!==i[0]&&i.unshift(0);var x=i.map(function(c,f){var w=!i[f+1],v=w?l+h-c:i[f+1]-c;if(v<=0)return null;var b=f%a.length;return m.createElement("rect",{key:"react-".concat(f),x:c,y:s,width:v,height:u,stroke:"none",fill:a[b],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},x)}var ze=function(t,r){var a=t.xAxis,o=t.width,l=t.height,s=t.offset;return U(q(g(g(g({},K.defaultProps),a),{},{ticks:X(a,!0),viewBox:{x:0,y:0,width:o,height:l}})),s.left,s.left+s.width,r)},Se=function(t,r){var a=t.yAxis,o=t.width,l=t.height,s=t.offset;return U(q(g(g(g({},K.defaultProps),a),{},{ticks:X(a,!0),viewBox:{x:0,y:0,width:o,height:l}})),s.top,s.top+s.height,r)},_={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function R(e){var t,r,a,o,l,s,h=se(),u=ce(),d=de(),i=g(g({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:_.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:_.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:_.horizontal,horizontalFill:(o=e.horizontalFill)!==null&&o!==void 0?o:_.horizontalFill,vertical:(l=e.vertical)!==null&&l!==void 0?l:_.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:_.verticalFill,x:y(e.x)?e.x:d.left,y:y(e.y)?e.y:d.top,width:y(e.width)?e.width:d.width,height:y(e.height)?e.height:d.height}),x=i.x,c=i.y,f=i.width,w=i.height,v=i.syncWithTicks,b=i.horizontalValues,E=i.verticalValues,P=he(),C=ue();if(!y(f)||f<=0||!y(w)||w<=0||!y(x)||x!==+x||!y(c)||c!==+c)return null;var T=i.verticalCoordinatesGenerator||ze,G=i.horizontalCoordinatesGenerator||Se,O=i.horizontalPoints,z=i.verticalPoints;if((!O||!O.length)&&L(G)){var $=b&&b.length,S=G({yAxis:C?g(g({},C),{},{ticks:$?b:C.ticks}):void 0,width:h,height:u,offset:d},$?!0:v);M(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(j(S),"]")),Array.isArray(S)&&(O=S)}if((!z||!z.length)&&L(T)){var I=E&&E.length,N=T({xAxis:P?g(g({},P),{},{ticks:I?E:P.ticks}):void 0,width:h,height:u,offset:d},I?!0:v);M(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(j(N),"]")),Array.isArray(N)&&(z=N)}return m.createElement("g",{className:"recharts-cartesian-grid"},m.createElement(_e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),m.createElement(ke,p({},i,{offset:d,horizontalPoints:O,xAxis:P,yAxis:C})),m.createElement(Pe,p({},i,{offset:d,verticalPoints:z,xAxis:P,yAxis:C})),m.createElement(Ce,p({},i,{horizontalPoints:O})),m.createElement(Oe,p({},i,{verticalPoints:z})))}R.displayName="CartesianGrid";const Ne=(e,t)=>{const r=new Date(e);switch(t){case"7d":return r.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});case"30d":return r.toLocaleDateString("en-US",{month:"short",day:"numeric"});case"90d":case"1y":return r.toLocaleDateString("en-US",{month:"short",year:"2-digit"});default:return r.toLocaleDateString()}},Ae={"7d":"7","30d":"30","90d":"90","1y":"365"},Ee=(e,t)=>{const r=V({queryKey:["marketChart",e,t],enabled:!!e,queryFn:async()=>{const a=Ae[t];return(await te(e,a)).prices.map(([l,s])=>({time:Ne(l,t),price:s,timestamp:l}))},staleTime:3e5});return{chartData:r.data??[],isLoading:r.isLoading,error:r.error?String(r.error):null}},Fe=({token:e})=>n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 mt-5",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:e.image.large,alt:`${e.name} image`,className:"w-12 h-12 rounded-full"}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:[e.name," (",e.symbol.toUpperCase(),")"]}),n.jsxs("p",{className:"text-muted-foreground text-sm sm:text-base",children:["#",e.market_cap_rank," by Market Cap"]})]})]}),n.jsxs("div",{className:"flex flex-col items-end",children:[n.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:k(e.market_data.current_price.usd.toString())}),n.jsx(re,{data:e.market_data.price_change_percentage_24h})]})]}),Le=({chartData:e,selectedRange:t,onRangeChange:r,isPositive:a,isLoading:o})=>{const{theme:l}=Q(),s=l==="dark"||l==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches,h=s?"#e5e7eb":"#374151",u=s?"#374151":"#e5e7eb",d="#10b981",i="#ef4444",x=["7d","30d","90d","1y"];return n.jsxs(D,{contentClassName:"p-6",children:[n.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:x.map(c=>n.jsx(J,{className:B("min-w-[60px] transition-all duration-200 cursor-pointer border-gray-400",t===c?"bg-primary text-primary-foreground border-2 border-primary":"hover:bg-muted"),variant:t===c?"default":"outline",size:"sm",onClick:()=>r(c),disabled:o,children:c},c))}),n.jsx("div",{className:"w-full h-[400px] sm:h-[400px]",children:n.jsx(me,{width:"100%",height:"100%",children:n.jsxs(ae,{data:e,margin:{top:20,right:30,left:20,bottom:20},children:[n.jsx(R,{strokeDasharray:"3 3",stroke:u,opacity:.3}),n.jsx(ie,{dataKey:"time",stroke:h,fontSize:12,tickLine:!1,axisLine:!1,tick:{fill:h}}),n.jsx(ne,{domain:["auto","auto"],stroke:h,fontSize:12,tickLine:!1,axisLine:!1,tick:{fill:h},padding:{bottom:20},tickFormatter:c=>k(c)}),n.jsx(ge,{contentStyle:{backgroundColor:s?"#1f2937":"#ffffff",border:`1px solid ${u}`,borderRadius:"8px",color:h},formatter:c=>[k(c.toString()),"Price"],labelFormatter:c=>`Date: ${c}`}),n.jsx(le,{type:"monotone",dataKey:"price",stroke:a?d:i,strokeWidth:3,dot:!1,activeDot:{r:6,strokeWidth:2,stroke:a?d:i},fill:a?d:i})]})})})]})},F=e=>`${e>=0?"+":""}${e.toFixed(2)}%`,De=({token:e})=>{const t=[{label:"Current Price",value:k(e.market_data.current_price.usd.toString())},{label:"Market Cap",value:k(e.market_data.market_cap.usd.toString())},{label:"24h Volume",value:k(e.market_data.total_volume.usd.toString())},{label:"24h Change",value:F(e.market_data.price_change_percentage_24h),isPercentage:!0,isPositive:e.market_data.price_change_percentage_24h>=0},{label:"7d Change",value:F(e.market_data.price_change_percentage_7d||0),isPercentage:!0,isPositive:(e.market_data.price_change_percentage_7d||0)>=0},{label:"30d Change",value:F(e.market_data.price_change_percentage_30d||0),isPercentage:!0,isPositive:(e.market_data.price_change_percentage_30d||0)>=0}];return n.jsx(D,{title:"Market Information",contentClassName:"px-6",titleClassName:"text-2xl font-semibold",children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:r.label}),n.jsx("p",{className:B("text-2xl font-bold",r.isPercentage&&(r.isPositive?"text-green-500":"text-red-500")),children:r.value})]},r.label))})})},Te=({token:e})=>e.description?.en?n.jsx(D,{title:"About",contentClassName:"px-6",titleClassName:"text-2xl font-semibold",children:n.jsx("div",{className:"prose prose-sm md:prose-base dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:e.description.en}})}):null,Ge=()=>n.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[n.jsx(A,{className:"h-12 w-1/2 mx-auto"}),n.jsx(A,{className:"h-6 w-1/3 mx-auto"}),n.jsx(A,{className:"h-[400px] w-full"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:Array.from({length:6}).map((e,t)=>n.jsx(A,{className:"h-20 w-full"},t))})]}),Ve=()=>{const{tokenId:e}=Z(),[t,r]=ee.useState("7d");if(!e)return;const{data:a,error:o,isLoading:l}=V({queryKey:[e],queryFn:()=>oe(e),staleTime:5*60*1e3}),{chartData:s,error:h,isLoading:u}=Ee(e,t),d=o||h;if(d)return n.jsx(xe,{error:d});if(l||!a)return n.jsx(Ge,{});const i=t==="90d"?a.market_data.price_change_percentage_60d>=0:a.market_data[`price_change_percentage_${t}`]>=0;return n.jsxs(n.Fragment,{children:[n.jsx(Fe,{token:a}),n.jsx(Le,{chartData:s,selectedRange:t,onRangeChange:r,isPositive:i,isLoading:u}),n.jsx(De,{token:a}),n.jsx(Te,{token:a})]})};export{Ve as CoinInfo};
