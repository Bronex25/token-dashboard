import{k as x,l as J,m as Q,r as _,j as i,n as C,B as Z,o as T,p as tt,q as et}from"./index-B5d5h_wr.js";import{u as rt,d as at,e as it,i as w,f as nt,g as lt,h as $,w as M,j as U,k as K,l as st,S as I,R as ot,T as ct}from"./generateCategoricalChart-bvcoDru5.js";import{C as L}from"./Card-CiJYoDw_.js";import{g as X,C as Y,T as dt,L as ht,X as ft,Y as mt,a as ut}from"./LineChart-Cpn4AChO.js";import xt from"./ErrorPage-C2U0YJVo.js";var gt=["x1","y1","x2","y2","key"],yt=["offset"];function O(t){"@babel/helpers - typeof";return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(t)}function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),r.push.apply(r,a)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V(Object(r),!0).forEach(function(a){vt(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function vt(t,e,r){return e=pt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pt(t){var e=bt(t,"string");return O(e)=="symbol"?e:e+""}function bt(t,e){if(O(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(O(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P(){return P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},P.apply(this,arguments)}function B(t,e){if(t==null)return{};var r=jt(t,e),a,l;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(l=0;l<s.length;l++)a=s[l],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function jt(t,e){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;r[a]=t[a]}return r}var kt=function(e){var r=e.fill;if(!r||r==="none")return null;var a=e.fillOpacity,l=e.x,s=e.y,o=e.width,u=e.height,m=e.ry;return x.createElement("rect",{x:l,y:s,ry:m,width:o,height:u,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function R(t,e){var r;if(x.isValidElement(t))r=x.cloneElement(t,e);else if($(t))r=t(e);else{var a=e.x1,l=e.y1,s=e.x2,o=e.y2,u=e.key,m=B(e,gt),h=st(m,!1);h.offset;var n=B(h,yt);r=x.createElement("line",P({},n,{x1:a,y1:l,x2:s,y2:o,fill:"none",key:u}))}return r}function wt(t){var e=t.x,r=t.width,a=t.horizontal,l=a===void 0?!0:a,s=t.horizontalPoints;if(!l||!s||!s.length)return null;var o=s.map(function(u,m){var h=g(g({},t),{},{x1:e,y1:u,x2:e+r,y2:u,key:"line-".concat(m),index:m});return R(l,h)});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Nt(t){var e=t.y,r=t.height,a=t.vertical,l=a===void 0?!0:a,s=t.verticalPoints;if(!l||!s||!s.length)return null;var o=s.map(function(u,m){var h=g(g({},t),{},{x1:u,y1:e,x2:u,y2:e+r,key:"line-".concat(m),index:m});return R(l,h)});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function _t(t){var e=t.horizontalFill,r=t.fillOpacity,a=t.x,l=t.y,s=t.width,o=t.height,u=t.horizontalPoints,m=t.horizontal,h=m===void 0?!0:m;if(!h||!e||!e.length)return null;var n=u.map(function(c){return Math.round(c+l-l)}).sort(function(c,d){return c-d});l!==n[0]&&n.unshift(0);var b=n.map(function(c,d){var j=!n[d+1],v=j?l+o-c:n[d+1]-c;if(v<=0)return null;var p=d%e.length;return x.createElement("rect",{key:"react-".concat(d),y:c,x:a,height:v,width:s,stroke:"none",fill:e[p],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},b)}function Pt(t){var e=t.vertical,r=e===void 0?!0:e,a=t.verticalFill,l=t.fillOpacity,s=t.x,o=t.y,u=t.width,m=t.height,h=t.verticalPoints;if(!r||!a||!a.length)return null;var n=h.map(function(c){return Math.round(c+s-s)}).sort(function(c,d){return c-d});s!==n[0]&&n.unshift(0);var b=n.map(function(c,d){var j=!n[d+1],v=j?s+u-c:n[d+1]-c;if(v<=0)return null;var p=d%a.length;return x.createElement("rect",{key:"react-".concat(d),x:c,y:o,width:v,height:m,stroke:"none",fill:a[p],fillOpacity:l,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},b)}var Ot=function(e,r){var a=e.xAxis,l=e.width,s=e.height,o=e.offset;return U(X(g(g(g({},Y.defaultProps),a),{},{ticks:K(a,!0),viewBox:{x:0,y:0,width:l,height:s}})),o.left,o.left+o.width,r)},Ct=function(e,r){var a=e.yAxis,l=e.width,s=e.height,o=e.offset;return U(X(g(g(g({},Y.defaultProps),a),{},{ticks:K(a,!0),viewBox:{x:0,y:0,width:l,height:s}})),o.top,o.top+o.height,r)},S={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function q(t){var e,r,a,l,s,o,u=rt(),m=at(),h=it(),n=g(g({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:S.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:S.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:S.horizontal,horizontalFill:(l=t.horizontalFill)!==null&&l!==void 0?l:S.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:S.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:S.verticalFill,x:w(t.x)?t.x:h.left,y:w(t.y)?t.y:h.top,width:w(t.width)?t.width:h.width,height:w(t.height)?t.height:h.height}),b=n.x,c=n.y,d=n.width,j=n.height,v=n.syncWithTicks,p=n.horizontalValues,k=n.verticalValues,f=nt(),y=lt();if(!w(d)||d<=0||!w(j)||j<=0||!w(b)||b!==+b||!w(c)||c!==+c)return null;var E=n.verticalCoordinatesGenerator||Ot,z=n.horizontalCoordinatesGenerator||Ct,N=n.horizontalPoints,A=n.verticalPoints;if((!N||!N.length)&&$(z)){var W=p&&p.length,F=z({yAxis:y?g(g({},y),{},{ticks:W?p:y.ticks}):void 0,width:u,height:m,offset:h},W?!0:v);M(Array.isArray(F),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(O(F),"]")),Array.isArray(F)&&(N=F)}if((!A||!A.length)&&$(E)){var H=k&&k.length,D=E({xAxis:f?g(g({},f),{},{ticks:H?k:f.ticks}):void 0,width:u,height:m,offset:h},H?!0:v);M(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(O(D),"]")),Array.isArray(D)&&(A=D)}return x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(kt,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),x.createElement(wt,P({},n,{offset:h,horizontalPoints:N,xAxis:f,yAxis:y})),x.createElement(Nt,P({},n,{offset:h,verticalPoints:A,xAxis:f,yAxis:y})),x.createElement(_t,P({},n,{horizontalPoints:N})),x.createElement(Pt,P({},n,{verticalPoints:A})))}q.displayName="CartesianGrid";const St=(t,e)=>{const r=new Date(t);switch(e){case"7d":return r.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});case"30d":return r.toLocaleDateString("en-US",{month:"short",day:"numeric"});case"90d":case"1y":return r.toLocaleDateString("en-US",{month:"short",year:"2-digit"});default:return r.toLocaleDateString()}},G=t=>`${t>=0?"+":""}${t.toFixed(2)}%`,Tt=()=>{const{tokenId:t}=J(),{theme:e}=Q(),[r,a]=_.useState(null),[l,s]=_.useState(""),[o,u]=_.useState("7d"),[m,h]=_.useState([]),[n,b]=_.useState(!1),c=e==="dark"||e==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches,d=c?"#e5e7eb":"#374151",j=c?"#374151":"#e5e7eb",v="#10b981",p="#ef4444";if(_.useEffect(()=>{if(!t)return;s(""),(async()=>{try{const y=await tt(t);a(y)}catch(y){s(String(y)),console.error("Failed to fetch token by ID:",y)}})()},[t]),_.useEffect(()=>{b(!0),(async()=>{if(t)try{const E=(await et(t,o)).prices.map(([z,N])=>({time:St(z,o),price:N,timestamp:z}));h(E)}catch(y){s(String(l)),console.error("Failed to fetch market chart:",y)}})(),setTimeout(()=>b(!1),2e3)},[t,o]),l)return i.jsx(xt,{error:l});if(!r)return i.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[i.jsx(I,{className:"h-12 w-1/2 mx-auto"}),i.jsx(I,{className:"h-6 w-1/3 mx-auto"}),i.jsx(I,{className:"h-[400px] w-full"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:Array.from({length:6}).map((f,y)=>i.jsx(I,{className:"h-20 w-full"},y))})]});const k=r.market_data.price_change_percentage_24h>=0;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 mt-5",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:r.image.large,alt:`${r.name} image`,className:"w-12 h-12 rounded-full"}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:[r.name," (",r.symbol.toUpperCase(),")"]}),i.jsxs("p",{className:"text-muted-foreground text-sm sm:text-base",children:["#",r.market_cap_rank," by Market Cap"]})]})]}),i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:C(r.market_data.current_price.usd.toString())}),i.jsx(dt,{data:r.market_data.price_change_percentage_24h})]})]}),i.jsxs(L,{contentClassName:"p-6",children:[i.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:["7d","30d","90d","1y"].map(f=>i.jsx(Z,{className:T("min-w-[60px] transition-all duration-200 cursor-pointer border-gray-400",o===f?"bg-primary text-primary-foreground border-2 border-primary":"hover:bg-muted"),variant:o===f?"default":"outline",size:"sm",onClick:()=>u(f),disabled:n,children:f},f))}),i.jsx("div",{className:"w-full h-[400px] sm:h-[400px]",children:i.jsx(ot,{width:"100%",height:"100%",children:i.jsxs(ht,{data:m,margin:{top:20,right:30,left:20,bottom:20},children:[i.jsx(q,{strokeDasharray:"3 3",stroke:j,opacity:.3}),i.jsx(ft,{dataKey:"time",stroke:d,fontSize:12,tickLine:!1,axisLine:!1,tick:{fill:d}}),i.jsx(mt,{domain:["auto","auto"],stroke:d,fontSize:12,tickLine:!1,axisLine:!1,tick:{fill:d},padding:{bottom:20},tickFormatter:f=>C(f)}),i.jsx(ct,{contentStyle:{backgroundColor:c?"#1f2937":"#ffffff",border:`1px solid ${j}`,borderRadius:"8px",color:d},formatter:f=>[C(f.toString()),"Price"],labelFormatter:f=>`Date: ${f}`}),i.jsx(ut,{type:"monotone",dataKey:"price",stroke:k?v:p,strokeWidth:3,dot:!1,activeDot:{r:6,strokeWidth:2,stroke:k?v:p},fill:k?v:p})]})})})]}),i.jsx(L,{title:"Market Information",contentClassName:"px-6",titleClassName:"text-2xl font-semibold",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Current Price"}),i.jsx("p",{className:"text-2xl font-bold",children:C(r.market_data.current_price.usd.toString())})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Market Cap"}),i.jsx("p",{className:"text-2xl font-bold",children:C(r.market_data.market_cap.usd.toString())})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"24h Volume"}),i.jsx("p",{className:"text-2xl font-bold",children:C(r.market_data.total_volume.usd.toString())})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"24h Change"}),i.jsx("p",{className:T("text-2xl font-bold",k?"text-green-500":"text-red-500"),children:G(r.market_data.price_change_percentage_24h)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"7d Change"}),i.jsx("p",{className:T("text-2xl font-bold",(r.market_data.price_change_percentage_7d||0)>=0?"text-green-500":"text-red-500"),children:G(r.market_data.price_change_percentage_7d||0)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"30d Change"}),i.jsx("p",{className:T("text-2xl font-bold",(r.market_data.price_change_percentage_30d||0)>=0?"text-green-500":"text-red-500"),children:G(r.market_data.price_change_percentage_30d||0)})]})]})}),r.description?.en&&i.jsx(L,{title:"About",contentClassName:"px-6",titleClassName:"text-2xl font-semibold",children:i.jsx("div",{className:"prose prose-sm max-w-none text-muted-foreground leading-relaxed",dangerouslySetInnerHTML:{__html:r.description.en}})})]})};export{Tt as CoinInfo};
