import{K as k,r as f,j as e,L as C,n as x,B as v,M as h,N as T,O as S,Q as A}from"./index-CXP4J-qZ.js";import{C as g}from"./Card-7JvNLrwe.js";import{u as L,T as M,a as K,b as u,c as R,f as j,d as D,e as _,g as F,h as V,i as q,A as H,j as U,k as E}from"./table-DNEUhPtt.js";import{S as c,C as I,a as $,b as B,c as P,R as G}from"./generateCategoricalChart-CpzKTJZo.js";import{T as p,L as O,Y as Q,a as W}from"./LineChart-sDHJCfvz.js";import Y from"./ErrorPage-DOiAzNwv.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],J=k("calendar",z);function X({columns:s,data:t,isLoading:r}){const[l,o]=f.useState([]),i=L({data:t,columns:s,getCoreRowModel:q(),getPaginationRowModel:V(),onSortingChange:o,getSortedRowModel:F(),state:{sorting:l}});return e.jsx("div",{className:"rounded-md border-1 border-gray-200 shadow-sm",children:e.jsxs(M,{children:[e.jsx(K,{children:i.getHeaderGroups().map(a=>e.jsx(u,{children:a.headers.map(n=>e.jsx(R,{children:n.isPlaceholder?null:j(n.column.columnDef.header,n.getContext())},n.id))},a.id))}),e.jsx(D,{children:r?Array.from({length:10}).map((a,n)=>e.jsx(u,{children:s.map((le,b)=>e.jsx(_,{children:e.jsx(c,{className:"h-4 w-[70%]"})},b))},n)):i.getRowModel().rows.map(a=>e.jsx(u,{"data-state":a.getIsSelected()&&"selected",className:"hover:bg-gray-100 dark:hover:bg-blue-800",children:a.getVisibleCells().map(n=>e.jsx(_,{children:j(n.column.columnDef.cell,n.getContext())},n.id))},a.id))})]})})}const Z=({title:s,imageUrl:t,author:r,publishedAt:l,url:o})=>{const i=new Date(l).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),a="./no-image.png";return e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(I,{className:`flex flex-col overflow-hidden h-full transition duration-200
          hover:shadow-lg hover:scale-105
          dark:hover:scale-105 dark:hover:shadow-[0_4px_24px_0_rgba(80,180,255,0.25)]`,children:[e.jsx("img",{src:t||a,alt:s,onError:n=>n.currentTarget.src=a,className:"w-full h-40 object-cover"}),e.jsx($,{className:"pb-2 px-4 pt-3",children:e.jsx(B,{className:"text-base font-semibold line-clamp-2",children:s})}),e.jsxs(P,{className:"px-4 pb-4 text-xs text-muted-foreground space-y-2",children:[r&&e.jsxs("p",{children:["By ",r]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3"}),i]})]})]})})};function N(){return e.jsxs("div",{className:"p-4 shadow rounded-md space-y-2",children:[e.jsx(c,{className:"h-4 w-1/2"}),e.jsx(c,{className:"h-6 w-2/3"}),e.jsx(c,{className:"h-8 w-full"})]})}const y=({id:s,name:t,image:r,current_price:l,price_change_percentage_24h:o})=>e.jsxs(C,{to:`/cryptocurrencies/${s}`,className:"flex justify-between hover:bg-gray-100 rounded-md p-1 dark:hover:bg-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:r,alt:t,className:"w-5 h-5 "}),e.jsx("p",{className:"text-base font-normal",children:t})]}),e.jsxs("p",{className:"flex gap-2 text-sm items-center ",children:[x(l.toString()),e.jsx(p,{data:o})]})]}),d=s=>t=>{const r=t.column.getIsSorted();return e.jsxs(v,{variant:"ghost",onClick:()=>t.column.toggleSorting(t.column.getIsSorted()==="asc"),className:" font-semibold has-[>svg]:px-0 cursor-pointer",children:[s,r===!1&&e.jsx(H,{}),r==="asc"&&e.jsx(U,{}),r==="desc"&&e.jsx(E,{})]})},m=s=>({row:t})=>e.jsx("div",{className:"text-left font-medium",children:x(t.getValue(s))}),ee=[{accessorKey:"market_cap_rank",header:d("#"),cell:({row:s})=>e.jsx("div",{className:"text-center font-medium",children:s.getValue("market_cap_rank")})},{accessorKey:"name",header:d("Coin"),cell:({row:s})=>{const t=s.original.image,r=s.original.id;return e.jsxs(C,{to:`/cryptocurrencies/${r}`,className:"font-medium flex items-center gap-2",children:[e.jsx("img",{src:t||"public/tokenFallback.svg",alt:"Token img",className:"w-7 h-7"}),s.getValue("name"),e.jsx("span",{className:"text-gray-400 text-xs",children:s.original.symbol.toUpperCase()})]})}},{accessorKey:"current_price",header:d("Price"),cell:m("current_price")},{accessorKey:"price_change_percentage_24h",header:d("24h Change"),cell:({row:s})=>{const t=s.getValue("price_change_percentage_24h");return e.jsx(p,{data:t})}},{accessorKey:"total_volume",header:d("Volume"),cell:m("total_volume")},{accessorKey:"market_cap",header:d("Market Cap"),cell:m("market_cap")},{accessorKey:"fully_diluted_valuation",header:d("FDV"),cell:m("fully_diluted_valuation")},{accessorKey:"ath",header:d("ATH"),cell:m("ath")},{accessorKey:"sparkline_in_7d",header:()=>e.jsx("p",{children:"Last 7d Chart"}),cell:({row:s})=>{const t=s.getValue("sparkline_in_7d"),r=s.getValue("price_change_percentage_24h")>=0?"#22c55e":"#ef4444";return!t||!Array.isArray(t.price)?e.jsx("div",{children:"No data"}):e.jsx(G,{width:"100%",height:60,children:e.jsxs(O,{data:t.price.map((l,o)=>({index:o,value:l})),children:[e.jsx(Q,{hide:!0,domain:[l=>l-l*.005,l=>l+l*.005]}),e.jsx(W,{type:"monotone",dataKey:"value",stroke:r,strokeWidth:2,dot:!1})]})})}}];function w(){return e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(c,{className:"h-6 w-6 rounded-full"}),e.jsx(c,{className:"h-4 w-28"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(c,{className:"h-4 w-16"}),e.jsx(c,{className:"h-4 w-10"})]})]})}function ae(){return e.jsxs("div",{className:"rounded-md shadow p-4 space-y-3",children:[e.jsx(c,{className:"w-full aspect-[16/9] rounded-md"}),e.jsx(c,{className:"h-5 w-3/4"}),e.jsx(c,{className:"h-4 w-1/2"})]})}const se="https://newsdata.io/api/1/news";async function te(){const s=`${se}?apikey=pub_3270d36371324780b61f4104bc597a24&q=crypto&language=en`,t=await fetch(s);if(t.ok){const r=await t.json(),l=new Set;return r.results.filter(i=>l.has(i.title)?!1:(l.add(i.title),!0))}else throw new Error(`NewsData API error: ${t.status} ${t.statusText}`)}const re=()=>({global:h({queryKey:["globalData"],queryFn:A,staleTime:5*60*1e3}),trending:h({queryKey:["trendingTokens"],queryFn:S,staleTime:5*60*1e3}),news:h({queryKey:["news"],queryFn:te,staleTime:5*60*1e3}),tokens:h({queryKey:["tokens"],queryFn:()=>T("1"),staleTime:5*60*1e3})}),xe=()=>{const{tokens:s,news:t,global:r,trending:l}=re(),o=f.useMemo(()=>[...s.data||[]].sort((a,n)=>n.price_change_percentage_24h-a.price_change_percentage_24h).slice(0,5),[s.data]),i=f.useMemo(()=>s.data?s.data.slice(0,10):[],[s]);return s.error||r.error||l.error||t.error?e.jsx(Y,{error:s.error||r.error||l.error||t.error}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-semibold md:text-4xl text-center mt-6",children:"Cryptocurrency Market Overview"}),r.isLoading||!r.data?e.jsx(c,{className:"w-[50%] h-3"}):e.jsxs("p",{className:"text-medium lg:text-lg max-w-full flex flex-wrap gap-2",children:["The global cryptocurrency market cap today is"," ",x(r?.data.data.total_market_cap.usd.toString()||"0",!0),", a"," ",e.jsx(p,{data:r.data.data.market_cap_change_percentage_24h_usd||0})," ","change in the last 24 hours."]})]}),e.jsxs("section",{className:"flex gap-2 flex-col md:flex-row w-full",children:[e.jsx("div",{className:"flex gap-2 flex-1/4 md:flex-col",children:r.isLoading||!r.data?e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(N,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{title:x(r.data?.data.total_market_cap.usd.toString()),cardClassName:"gap-2 p-4 md:h-[50%] w-full",titleClassName:"lg:text-lg md:text-medium text-sm font-semibold ",headerClassName:"px-0",contentClassName:"p-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-gray-500 font-medium text-sm dark:text-gray-400",children:"Market Cap"}),e.jsx(p,{data:r.data.data.market_cap_change_percentage_24h_usd})]})}),e.jsx(g,{title:x(r.data.data.total_volume.usd.toString()),cardClassName:"gap-2 p-4 md:h-[50%] w-full",headerClassName:"px-0",titleClassName:"lg:text-lg text-medium font-semibold ",contentClassName:"p-0",children:e.jsx("p",{className:"text-gray-500 font-medium text-sm dark:text-gray-400",children:"24h Trading Volume"})})]})}),e.jsx(g,{title:"ðŸ”¥ Trending",cardClassName:"p-4 justify-between gap-0 flex-2/5",headerClassName:"px-0",contentClassName:"flex flex-col gap-0 px-0",titleClassName:"text-lg font-semibold",children:l.isLoading||!l.data?Array.from({length:5}).map((a,n)=>e.jsx(w,{},n)):l.data.map(a=>e.jsx(y,{id:a.item.id,name:a.item.name,image:a.item.small,current_price:a.item.data.price,price_change_percentage_24h:a.item.data.price_change_percentage_24h.usd},a.item.id))}),e.jsx(g,{title:"ðŸš€ Top Gainers",cardClassName:"flex-2/5 gap-0 p-4 justify-between",headerClassName:"px-0",contentClassName:"flex flex-col gap-0 px-0",titleClassName:"text-lg font-semibold",children:s.isLoading?Array.from({length:5}).map((a,n)=>e.jsx(w,{},n)):o.map(a=>e.jsx(y,{id:a.id,name:a.name,image:a.image,current_price:a.current_price,price_change_percentage_24h:a.price_change_percentage_24h},a.id))})]}),e.jsxs("section",{className:"w-full",children:[e.jsxs("h1",{className:"text-2xl font-medium mb-10 text-center",children:["Top 10 Cryptocurrencies"," "]}),e.jsx(X,{data:i,columns:ee,isLoading:s.isLoading})]}),e.jsxs("section",{className:"w-full",children:[e.jsx("h1",{className:"text-2xl font-medium mb-10 text-center",children:"Last Crypto News"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 ",children:t.isLoading||!t.data?Array.from({length:6}).map((a,n)=>e.jsx(ae,{},n)):t.data.length>0?t.data.map(a=>e.jsx(Z,{title:a.title,author:a.creator&&a.creator.length>0?a.creator[0]:"Unknown",imageUrl:a.image_url,publishedAt:a.pubDate,url:a.link},a.article_id)):e.jsx("p",{children:"There are no news at the moment"})})]})]})};export{xe as Home};
